name: Dispatch event

on:
  push:
    branches:
      - main

jobs:
  dispatch:
    runs-on: ubuntu-latest
    
    steps:
      - name: Get files from run_GitHub_Actions
      - uses: actions/checkout@v2
      
      - name: Get desired repo name from input_text -cut text at newline char and take 2nd column
      - run: export REPOA_name = $(cat cb.txt | cut -d '/n' -f 2)

      - name: Testing Repository name way 0
      - run: $REPOA_name

      - name: Testing Repository name way 1
      - run: $github.event.repository.name

      - name: Testing Repository username way 0
      - run: $github.actor

      - name: Testing Repository username way 1
      - run: $GITHUB_ACTOR

      - name: Testing Repository ownername way 0
      - run: $github.repository_owner

      - name: Create a dispatch event for repository run_GitHub_Actions
        run: curl -L -X POST -H "Accept:application/vnd.github+json" -H "Authorization:Bearer ${{ secrets.REPOB }}" -H "X-GitHub-Api-Version:2022-11-28" https://api.github.com/repos/$github.repository_owner/$github.event.repository.name/dispatches -d '{"event_type":"on-demand-test","client_payload":{"fromRepoB":"OK"}}'
